<script src="../tinytest.js"></script>
<script>

  'use strict'

  //tested 7 success 7

//Target 
//The lastIndexOf() method returns the last index at which a given element can be found in the array, or -1 if it is not present. The array is searched backwards, starting at fromIndex.


//Prototype function
// function lastIndexOf(array, searchElement, indexFrom) { 
//   startingIndex = 0

// if (indexFrom) {
//   startingIndex = indexFrom
// }

// for (let i = startingIndex; i < array.length; i++ ) {
//   if(searchElement === array[i]) {
//     return i;
//   }
// }
// return -1;
// }

//arr.lastIndexOf(searchElement[, fromIndex])


// Requirement
// 1.It should return the last index of search element
// 2.If the search element can not be found , return -1
// 3.If fromIndex, the whole array will be searched and search backwards(Default arr.length - 1)
// 4.If the index is greater than or equal to the length, the whole array will be searched
// 5.If negative, it is taken as the offset from the end of the array.
// 6.when the index is negative, the array is still searched from back to front
// 7.If the calculated index is less than 0, -1 is returned and the array will not be searched.

function lastIndexOf(array, searchElement, indexFrom) { 
 let startingIndex = array.length - 1 

if (indexFrom) {
  if(indexFrom < 0){
    if(array.length - Math.abs(indexFrom) < 0){
      return -1;
    } else {
      startingIndex = array.length - Math.abs(indexFrom)
    }
  }
} 


for (let i = startingIndex ; 0 < i; i--) {
  if(searchElement === array[i]) {
    return i;
  }
}
return -1;
}



tests ({

'1.It should return the last index of search element' : function() {
  let lastIndexOfValue = lastIndexOf([1,2,3,4,1], 1 )
  eq(lastIndexOfValue, 4 )
},
'2.If the search element can not be found , return -1' : function() {
  let lastIndexOfValue = lastIndexOf([1,2,3,4,1], 5 )
  eq(lastIndexOfValue, -1 )
},
'3.If fromIndex, the whole array will be searched and search backwards(Default arr.length - 1)' : function() {
  let lastIndexOfValue = lastIndexOf([1,2,1,4,5],1 ,4 )
  eq(lastIndexOfValue, 2 )
},
'4.If the index is greater than or equal to the length, the whole array will be searched' : function() {
  let lastIndexOfValue = lastIndexOf([1,2,1,4,5],1 ,6 )
  eq(lastIndexOfValue, 2 )
},
'5.If negative, it is taken as the offset from the end of the array.' : function() {
  let lastIndexOfValue = lastIndexOf([1,2,1,4,5],1 ,-1 )
  eq(lastIndexOfValue, 2 )
},
'6.when the index is negative, the array is still searched from back to front.' : function() {
  let lastIndexOfValue = lastIndexOf([1,4,1,4,5], 4 ,-2 )
  eq(lastIndexOfValue, 3)
},
'7.If the calculated index is less than 0, -1 is returned and the array will not be searched.' : function() {
  let lastIndexOfValue = lastIndexOf([1,4,1,4,5], 4 ,-10 )
  eq(lastIndexOfValue,-1)
}
})








</script>